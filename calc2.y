%{
#include <iostream>
#include <string>    

using namespace std;

int yylex();
int yyerror(const char *p) { std::cerr << "error: " << p << std::endl; };
%}

%union {
    int val;
    char* str_val;
};


%token LPAREN RPAREN PLUS MINUS MUL DIV INT
%token <val> NUM
%token <str_val> VARIABLE

%type <val> expr
%type <val> commands
%type <val> assign

%start prog

/* Resolve the ambiguity of the grammar by defining precedence. */
/* Order of directives will determine the precedence. */
%left PLUS MINUS    /* left means left-associativity. */
%left DIV MUL

%%

prog : 
     | prog commands
     ;

commands : expr
         | assign

expr : expr PLUS expr                   { $$ = $1 + $3; }
     | expr MINUS expr                  { $$ = $1 - $3; }
     | expr MUL expr                    { $$ = $1 * $3; }
     | expr DIV expr                    { $$ = $1 / $3; }
     | NUM                              /* default action: { $$ = $1; } */
     | LPAREN expr RPAREN               { $$ = $2; }
     ;


assign : 
       | INT VARIABLE                 { printf("variable assignment"); }
       ;


%%

int main()
{
    yyparse(); // A parsing function that will be generated by Bison.
    return 0;
}




















